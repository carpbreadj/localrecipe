plugins {
	id 'java'
	id 'org.springframework.boot' version '3.5.3'
	id 'io.spring.dependency-management' version '1.1.7'
}

group = 'com.example'
version = '0.0.1-SNAPSHOT'

java {
	toolchain {
		languageVersion = JavaLanguageVersion.of(17)
	}
}

repositories {
	mavenCentral()
}

configurations {
	compileOnly {
		extendsFrom annotationProcessor
	}
	// ğŸ”‡ ëª¨ë“  êµ¬ì„±ì—ì„œ commons-logging ë°°ì œ (spring-jcl ê²½ê³  ì œê±°)
	all {
		exclude group: 'commons-logging', module: 'commons-logging'
	}
}

dependencies {
	// --- Spring ---
	implementation 'org.springframework.boot:spring-boot-starter-web'
	implementation 'org.springframework.boot:spring-boot-starter-validation'
	implementation 'org.springframework.boot:spring-boot-starter-data-jpa'

	// --- DB ---
	runtimeOnly 'com.h2database:h2'

	// --- Google Cloud Vision ---
	implementation 'com.google.cloud:google-cloud-vision:3.29.0'

	// --- JSON ---
	implementation 'com.fasterxml.jackson.core:jackson-databind'

	// --- Dev ---
	developmentOnly 'org.springframework.boot:spring-boot-devtools'

	// --- Lombok ---
	compileOnly 'org.projectlombok:lombok'
	annotationProcessor 'org.projectlombok:lombok'

	// --- Test ---
	testImplementation 'org.springframework.boot:spring-boot-starter-test'

	// âœ… ANTLR: ëŸ°íƒ€ì„/íˆ´ì„ 4.13.0ìœ¼ë¡œ ê³ ì •í•´ ë²„ì „ ì¶©ëŒ ì œê±°
	implementation 'org.antlr:antlr4-runtime:4.13.0'
	implementation 'org.antlr:antlr4:4.13.0'
}

/**
 * â—ì¤‘ìš”
 * - êµ³ì´ ì§ì ‘ ë„£ì–´ë‘ì—ˆë˜ ì•„ë˜ 2ê°œëŠ” ì œê±°í–ˆìŠµë‹ˆë‹¤.
 *   implementation 'jakarta.persistence:jakarta.persistence-api:3.1.0'
 *   implementation 'org.hibernate.orm:hibernate-core:6.3.1.Final'
 *   â†’ spring-boot-starter-data-jpaê°€ ë¶€íŠ¸ BOMìœ¼ë¡œ **ë§ëŠ” ë²„ì „**ì„ ìë™ ê´€ë¦¬í•©ë‹ˆë‹¤.
 *     ìˆ˜ë™ ê³ ì •ì€ í•˜ì´ë²„ë„¤ì´íŠ¸/ANTLR ì¶©ëŒ ì›ì¸ì´ ë©ë‹ˆë‹¤.
 */

// ğŸ”§ ëª¨ë“  êµ¬ì„±ì—ì„œ ANTLR ë²„ì „ ê°•ì œ (transitiveë¡œ 4.10.1ì´ ë“¤ì–´ì™€ë„ 4.13.0ìœ¼ë¡œ í†µì¼)
configurations.configureEach {
	resolutionStrategy {
		force 'org.antlr:antlr4-runtime:4.13.0', 'org.antlr:antlr4:4.13.0'
	}
}

tasks.named('test') {
	useJUnitPlatform()
}