<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>레시피 목록</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #e8f5e9; margin:0; }
        .banner { background-color: #66bb6a; color: white; text-align: center; padding: 30px 0; font-size: 26px; font-weight: bold; }
        .menu-bar { background-color: #a5d6a7; display: flex; justify-content: space-between; padding: 8px 16px; }
        .menu-bar a { color:#2e7d32; font-weight: bold; text-decoration: none; margin-right: 10px; }
        .grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap:16px; }
        .cardx { background:#fff; border-radius:10px; padding:14px; box-shadow:0 4px 10px rgba(0,0,0,0.08); }
        .cardx img { width:100%; height:140px; object-fit:cover; border-radius:8px; }
        .title { font-weight:700; margin:8px 0 6px; }
    </style>
</head>
<body>
<div class="banner">레시피</div>
<div class="menu-bar">
    <div>
        <a href="main.html">홈</a>
        <a href="fridge.html">나의 냉장고</a>
        <a href="recipes.html"><b>레시피</b></a>
    </div>
    <div>
        <a href="/logout">로그아웃</a>
    </div>
</div>

<div class="container my-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="m-0">레시피 목록</h4>
        <a href="recipe_new.html" class="btn btn-success">레시피 생성</a>
    </div>

    <div id="list" class="grid"></div>
</div>

<script>
    async function load() {
        const res = await fetch('/api/recipes');
        const list = await res.json();
        const wrap = document.getElementById('list');
        wrap.innerHTML = '';
        if (!list.length) {
            wrap.innerHTML = '<p class="text-muted">아직 저장된 레시피가 없습니다. 우측 상단의 “레시피 생성”을 눌러 추가하세요.</p>';
            return;
        }
        list.forEach(r => {
            const div = document.createElement('div');
            div.className = 'cardx';
            div.innerHTML = `
        <img src="${r.imageUrl || '/images/egg.jpg'}" alt="${r.title}">
        <div class="title">${r.title}</div>
        <div style="font-size:14px;">${short(r.ingredients)}</div>
        <a class="btn btn-outline-success btn-sm mt-2" href="recipe_view.html?id=${r.id}">상세</a>
      `;
            wrap.appendChild(div);
        });
    }
    function short(t){ t = (t||'').replace(/\n/g, ', '); return t.length>80? t.slice(0,80)+'…' : t; }
    load();
</script>
</body>
</html>